(()=>{"use strict";const e={PIXEL_SCALE:4,TILE_SIZE:15,SCREEN_WIDTH:25,SCREEN_HEIGHT:13,FRAME_DELAY:0,GRAVITY:1.1,MAX_Y_SPEED:8};class t{constructor(){this.queue=[],window.addEventListener("keydown",(e=>this.updateInputQueue(e)),!1),window.addEventListener("keyup",(e=>this.updateInputQueue(e)),!1)}updateInputQueue(e){let t=e.keyCode;"keydown"===e.type?this.queue.includes(t)||this.queue.push(t):this.queue.includes(t)&&this.queue.splice(this.queue.indexOf(t),1)}}const{abs:i}=Math;class d{constructor(){this.x=e.TILE_SIZE,this.y=e.TILE_SIZE,this.width=e.TILE_SIZE,this.height=2*e.TILE_SIZE,this.xSpeed=0,this.ySpeed=0}applyMomentum(t){let d=e=>t.indexOf(e)>-1;d(37)&&(!d(39)||t.indexOf(37)>t.indexOf(39))?(console.log("left"),this.xSpeed-=1,this.xSpeed<-5&&(this.xSpeed=-5)):d(39)&&(!d(39)||t.indexOf(39)>t.indexOf(37))&&(console.log("right"),this.xSpeed+=1,this.xSpeed>5&&(this.xSpeed=5)),this.xSpeed=this.xSpeed/1.5,i(this.xSpeed)<=.001&&(this.xSpeed=0),0===this.ySpeed?this.ySpeed=e.GRAVITY:(this.ySpeed*=e.GRAVITY,this.ySpeed>e.MAX_Y_SPEED&&(this.ySpeed=e.MAX_Y_SPEED)),this.y>=150&&(this.y=150,this.ySpeed=0),this.x+=this.xSpeed,this.y+=this.ySpeed}}let n,s,E,o,S,l,h=0,{round:u}=Math;function I(){if(h++,h<=e.FRAME_DELAY)return requestAnimationFrame(I);h=0,l.applyMomentum(S.queue),s.clearRect(0,0,E,o),s.fillStyle="#002080",s.fillRect(0,0,500,500),function(){let t=(t,i)=>{s.fillStyle="#505050",s.fillRect(t,i,e.TILE_SIZE,e.TILE_SIZE),s.fillStyle="#aaa",s.fillRect(t+1,i+1,e.TILE_SIZE-2,e.TILE_SIZE-2)};for(let i=0;i<e.SCREEN_HEIGHT;i++)for(let d=0;d<e.SCREEN_WIDTH;d++)0!=i&&i!=e.SCREEN_HEIGHT-1&&0!=d&&d!=e.SCREEN_WIDTH-1||t(d*e.TILE_SIZE,i*e.TILE_SIZE)}(),s.fillStyle="#dddddd",s.fillRect(u(l.x),u(l.y),l.width,l.height),function(){let e=`x:${l.x.toPrecision(5)} y:${l.y.toPrecision(5)} xSpeed: ${l.xSpeed.toPrecision(5)} ySpeed: ${l.ySpeed.toPrecision(5)} inputs: ${S.queue}`;s.fillStyle="#050505",s.font="bold 10px monospace",s.textBaseline="hanging",s.fillText(e,2,2)}(),requestAnimationFrame(I)}document.addEventListener("DOMContentLoaded",(function(){n=document.createElement("canvas"),n.id="gameCanvas",E=e.SCREEN_WIDTH*e.TILE_SIZE*e.PIXEL_SCALE,o=e.SCREEN_HEIGHT*e.TILE_SIZE*e.PIXEL_SCALE,n.width=E,n.height=o,s=n.getContext("2d"),s.scale(e.PIXEL_SCALE,e.PIXEL_SCALE),s.imageSmoothingEnabled=!1,document.body.style.backgroundColor="#000",document.body.style.height="100%",document.body.style.overflow="hidden",document.body.appendChild(n),l=new d,S=new t,I()}),!1)})();